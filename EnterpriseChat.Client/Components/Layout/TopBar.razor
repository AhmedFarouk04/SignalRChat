@using EnterpriseChat.Client.Models

<div class="topbar">
    @if (Room is null)
    {
        <span class="room-title">Loading…</span>
    }
    else
    {
        <div class="room-header">
            <div class="room-main">
                <span class="room-title">@Title</span>

                <span class="room-sub">
                    @if (IsPrivate)
                    {
                        <span class="dot online"></span>
                        <span>Online</span>
                    }
                    else
                    {
                        <span>@MembersCount members</span>
                    }
                </span>
            </div>

            <div class="room-actions">
                <button class="icon-btn" title="Search">🔎</button>
                <button class="icon-btn" title="Info">ℹ️</button>
            </div>
        </div>
    }
</div>

@code {
    [Parameter] public RoomModel? Room { get; set; }
    [Parameter] public int MembersCount { get; set; }

    private bool IsPrivate => Room?.Type == "Private";
    private string Title => IsPrivate
        ? (Room?.OtherDisplayName ?? Room?.Name ?? "Private Chat")
        : (Room?.Name ?? "Group");
}
