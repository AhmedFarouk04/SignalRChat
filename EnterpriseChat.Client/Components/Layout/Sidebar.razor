@using Microsoft.AspNetCore.Components.Routing
@inject NavigationManager Nav
@inject EnterpriseChat.Client.Authentication.Abstractions.ITokenStore TokenStore
@inject EnterpriseChat.Client.Authentication.Services.JwtAuthStateProvider AuthProvider

<div class="sidebar-header">
    <h2>EnterpriseChat</h2>
</div>

<ul class="sidebar-menu">
    <li>
        <NavLink class="sidebar-link" ActiveClass="active" href="/rooms" Match="NavLinkMatch.All">
            <span class="ico">💬</span><span>Rooms</span>
        </NavLink>
    </li>
    <li>
        <NavLink class="sidebar-link" ActiveClass="active" href="/groups/new" Match="NavLinkMatch.Prefix">
            <span class="ico">👥</span><span>Create group</span>
        </NavLink>
    </li>
    <li>
        <NavLink class="sidebar-link" ActiveClass="active" href="/users" Match="NavLinkMatch.Prefix">
            <span class="ico">👤</span><span>Users</span>
        </NavLink>
    </li>

    <li>
        <NavLink class="sidebar-link" ActiveClass="active" href="/muted" Match="NavLinkMatch.Prefix">
            <span class="ico">🔕</span><span>Muted</span>
        </NavLink>
    </li>

    <li>
        <NavLink class="sidebar-link" ActiveClass="active" href="/blocked" Match="NavLinkMatch.Prefix">
            <span class="ico">🚫</span><span>Blocked</span>
        </NavLink>
    </li>
   

</ul>


<div class="sidebar-footer">
    <button class="logout-btn" type="button" @onclick="Logout">
        ⎋ Logout
    </button>
</div>

@code {
    private void GoToRooms() => Nav.NavigateTo("/rooms");

    private async Task Logout()
    {
        await TokenStore.ClearAsync();
        AuthProvider.Notify();
        Nav.NavigateTo("/login", true);
    }
}
